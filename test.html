<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glossy Face Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Keep Font Awesome for future use of icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
      :root {
          --color-background: #ffffff;
      }

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          background: var(--color-background);
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
          overflow-x: hidden;
      }

      body.disable-scroll {
          overflow: hidden;
      }

      #hero {
          width: 100vw;
          height: 100vh;
          position: fixed;
          top: 0;
          left: 0;
          z-index: 1;
          pointer-events: none;
      }

      #menu-bottom {
        display: flex !important;
        flex-direction: row !important;
      }

      #menu-right {
        flex-direction: column !important;
        display: flex !important;
      }

      .icon-menu {
        position: fixed;
        z-index: 10000;
        opacity: 0;
        pointer-events: none;
        background: none;
        transition:
          opacity 0.5s cubic-bezier(.77,0,.175,1),
          left 0.7s cubic-bezier(.77,0,.175,1),
          right 0.7s cubic-bezier(.77,0,.175,1),
          top 0.7s cubic-bezier(.77,0,.175,1),
          bottom 0.7s cubic-bezier(.77,0,.175,1),
          transform 0.7s cubic-bezier(.77,0,.175,1);
      }

      .icon-menu.show {
        opacity: 1;
        pointer-events: auto;
      }

      .icon-menu.hide {
        opacity: 0;
        pointer-events: none;
      }

      .icon-menu.bottom-center {
        left: 50%;
        bottom: 18px;
        right: auto !important;
        top: auto !important;
        transform: translateX(-50%);
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 40px;
      }

      .icon-menu.right-side {
        left: auto !important;
        bottom: auto !important;
        right: 30px;
        top: 50%;
        transform: translateY(-50%);
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 20px;
      }

      .icon-btn {
        position: relative;
        width: 50px;
        height: 50px;
        border: none;
        border-radius: 50%;
        background: transparent;
        color: #353535;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 14px rgba(0,0,0,0.06);
        transition:
          background 0.2s, color 0.2s, box-shadow 0.2s,
          opacity 0.45s cubic-bezier(.77,0,.175,1),
          transform 0.5s cubic-bezier(.77,0,.175,1);
        opacity: 0;
        transform: scale(0.85);
      }

      /* Button reveal (used for "wave in" effect) */
      .icon-btn.wave-in {
        opacity: 1;
        transform: scale(1);
      }

      .icon-btn:hover, .icon-btn:focus {
        background: #353535;
        color: #fff;
        box-shadow: 0 8px 24px rgba(53,53,53,0.12);
      }
      .icon-btn:active {
        background: #444;
      }
      .icon-btn i {
        pointer-events: none;
      }

      .icon-btn.active {
        background: #353535 !important;
        color: #fff !important;
      }



      .content-section {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 100px 20px;
          background: var(--color-background);
          position: relative;
          z-index: 10;
      }

      .content-section .inner {
          max-width: 800px;
          text-align: center;
      }

      .content-section h2 {
          font-family: 'Roboto', sans-serif;
          font-weight: 900;
          font-size: 48px;
          color: #353535;
          margin-bottom: 20px;
          letter-spacing: 0.05em;
      }

      .content-section p {
          font-size: 18px;
          line-height: 1.8;
          color: #666;
      }

      #about {
          position: relative;
          background: var(--color-background);
          z-index: 10;
          padding: 0;
      }

      .about-container {
          width: 100%;
          min-height: 100vh;
          display: flex;
      }

      .about-left {
          width: 50%;
          padding: 80px 120px 80px 60px;
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
      }

      .about-right {
          width: 50%;
          height: 100vh;
          position: sticky;
          top: 0;
          background: #f5f5f5;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
      }

      .about-carousel {
          position: relative;
          width: 100%;
          height: 100%;
      }

      .about-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          opacity: 0;
          transition: opacity 3s ease-in-out;
      }

      .about-image.active {
          opacity: 1;
      }

      .about-title {
          font-family: 'Roboto', sans-serif;
          font-weight: 900;
          font-size: 120px;
          color: #353535;
          letter-spacing: -0.05em;
          margin-bottom: 60px;
          line-height: 1;
      }

      .about-text {
          font-family: 'Noto Sans KR', sans-serif;
          font-size: 14px;
          line-height: 1.8;
          color: #666;
          margin-bottom: 40px;
          font-weight: 200;
      }

      .about-text.large {
          font-size: 14px;
          font-weight: 200;
          margin-bottom: 20px;
      }

      .about-text em {
          font-style: normal;
          color: #353535;
      }


      /* --------------------------------------------
         ABOUT LEFT: STACKED IMAGES (PINNED SCROLL)
      -------------------------------------------- */

      .about-left-stack {
        margin-top: 24px;
        position: relative;
      }

      .about-left-stack .stack-stage {
        position: relative;
        width: 100%;
        max-width: 560px;
        aspect-ratio: 4 / 5;
        overflow: visible;
        padding-bottom: 100px;
      }

      .stack-card {
        position: absolute;
        left: 0;
        width: 100%;
        height: 88%;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 6px 24px rgba(0,0,0,0.08);
        transform-origin: center bottom;
        background: #ddd;
        will-change: transform;
      }

      .stack-card img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .stack-card-1 { top: 0;      z-index: 3; }
      .stack-card-2 { top: 40px;   z-index: 2; }
      .stack-card-3 { top: 80px;  z-index: 1; }

      .stack-caption {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        padding: 10px 14px;
        background: linear-gradient(transparent, rgba(0,0,0,0.55));
        color: #fff;
        font-size: 12px;
        letter-spacing: 0.02em;
      }

      .creators-section {
          position: relative;
          background: var(--color-background);
          z-index: 10;
          padding: 120px 60px 120px 60px;
          min-height: 100vh;
      }

      .creators-title {
          font-family: 'Roboto', sans-serif;
          font-weight: 900;
          font-size: 120px;
          color: #353535;
          letter-spacing: -0.05em;
          margin-bottom: 50px;
          line-height: 1;
          text-align: center;
      }

      .creators-grid {
        display: flex;
        justify-content: center;
        gap: 60px;
        flex-wrap: wrap;
      }

      .creator-card {
  flex: 1 1 320px;        /* Allows flexible growing, minimum 320px */
  max-width: 480px;       /* Cap at large desktop size */
  text-align: left;
}
.creator-image {
  width: 100%;           /* Scales to card/container */
  max-width: 520px;      /* Cap for desktop, adjust as needed */
  aspect-ratio: 5/4;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 24px;
  box-shadow: 0 6px 24px rgba(0,0,0,0.08);
  background: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
}
.creator-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}


      .creator-name {
          font-family: 'Roboto', sans-serif;
          font-weight: 400;
          font-size: 16px;
          color: #353535;
          margin-left: 10px;
      }

      .creator-bio {
          font-family: 'Noto Sans KR', sans-serif;
          font-size: 14px;
          line-height: 1.6;
          color: #353535;
          font-weight: 200;
            margin-left: 10px;
      }

      .creators-title-carousel {
        width: 100vw;
        max-width: 100%;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        margin-bottom: 50px;
      }

      .carousel-track {
        display: flex;
        gap: 60px; /* or something that looks right */
        align-items: center;
        /* Set minimum width to keep track centered on large screens */
        min-width: 100vw;
        will-change: transform;
      }

      .carousel-title {
        font-family: 'Roboto', sans-serif;
        font-weight: 900;
        font-size: 120px;
        color: #353535;
        letter-spacing: -0.05em;
        line-height: 1;
        white-space: nowrap;
        pointer-events: none;
        user-select: none;
        transition: color 0.3s;
      }

      @media (max-width: 1024px) {
          .creators-grid {
              gap: 40px;
          }
          .creators-title {
              font-size: 80px;
          }
      }


      @media (max-width: 900px) {
        .about-left-stack .stack-stage {
          max-width: 100%;
          aspect-ratio: 3 / 4;
          padding-bottom: 60px;
        }
        .stack-card { border-radius: 12px; }

        .icon-menu {
          gap: 28px;
        }
        .icon-btn {
          width: 44px;
          height: 44px;
          font-size: 18px;
        }

          .carousel-title { font-size: 80px; }
      }

      @media (max-width: 768px) {
          .creators-grid {
              flex-direction: column;
              align-items: center;
          }
          .creators-title {
              font-size: 60px;
              margin-bottom: 60px;
          }
      }

      @media (max-width: 600px) {
  .carousel-title { font-size: 48px; }
  .carousel-track { gap: 20px; }
}

    </style>
</head>
<body>
    <div id="hero"></div>



    <!-- Bottom icon menu (horizontal row layout) -->
    <nav class="icon-menu bottom-center show" id="menu-bottom">
      <button class="icon-btn"><i class="fas fa-home"></i></button>
      <button class="icon-btn"><i class="fas fa-info-circle"></i></button>
      <button class="icon-btn"><i class="fas fa-users"></i></button>
      <button class="icon-btn"><i class="fas fa-envelope"></i></button>
      <button class="icon-btn"><i class="fas fa-shopping-bag"></i></button>
    </nav>

    <!-- Right-side icon menu (vertical layout, initially hidden) -->
    <nav class="icon-menu right-side hide" id="menu-right">
      <button class="icon-btn"><i class="fas fa-home"></i></button>
      <button class="icon-btn"><i class="fas fa-info-circle"></i></button>
      <button class="icon-btn"><i class="fas fa-users"></i></button>
      <button class="icon-btn"><i class="fas fa-envelope"></i></button>
      <button class="icon-btn"><i class="fas fa-shopping-bag"></i></button>
    </nav>



    <div style="height: 100vh;"></div>

    <section id="about">
        <div class="about-container">
            <div class="about-left">
                <h2 class="about-title">ABOUT</h2>
                <h3 class="about-text" style="font-style: normal; font-size: 16px; margin-top: 0px; margin-bottom: 10px; font-weight: 400;">
                    einsteinInseoul
                </h3>

                <p class="about-text large">
                    아인쉬타인인서울을 서울의 돌은 최상의 품질을 추구합니다.
                </p>

                <p class="about-text">
                    한국과 프랑스 명품제작방식인 쇠바느질과 기계 자수등을 표본으로 소품과 연구소를 운영하고 있으며
                    최상의 퀄리티와 최고의 장인을 통한 전문가 양성을 위한 교육의 비전도 가지고 있습니다.
                </p>

                <h3 class="about-text" style="font-style: normal; font-size: 16px; margin-top: 0px; margin-bottom: 10px; font-weight: 400;">
                    Poetic Moments in Everyday Life
                </h3>

                <p class="about-text">
                    아인쉬타인인서울은 einstein은 독일어로 하나의 돌을 의미합니다. 서울의 돌은 우리가 흔히 지나치는 돌에서 영감을 얻은 이름입니다.
                    지금의 내가 쓰는 물건은 과거에서 현재, 미래의 나를 반영합니다. 쓸때 쓸수록 나를 닮아가는 서울의 돌처럼
                    사랑하는 사람에게 소중한 추억을 선물해보세요.
                </p>

                <h3 class="about-text" style="font-style: normal; font-size: 16px; margin-top: 0px; margin-bottom: 10px; font-weight: 400;">
                    Moments poétiques de la vie quotidienne
                </h3>

                <p class="about-text">
                    서울의 돌 하우스 오브 스타(einsteinInseoul House of STARs)를 곧 선보일 예정입니다.
                    영원한 상징인 시간이 지나도 변하지 않는 아름다움을 담은 예술적이고 모던한 공간과
                    서울의 돌에서 가장 사랑받는 컬렉션의 첫번째 디자인을 만나보세요.
                </p>

                <div class="about-left-stack" aria-label="Process image stack">
                  <div class="stack-stage">
                    <figure class="stack-card stack-card-1">
                      <img src="img/process/bw_1.jpg" alt="Process photo 1" />
                      <figcaption class="stack-caption">First step description</figcaption>
                    </figure>
                    <figure class="stack-card stack-card-2">
                      <img src="img/process/bw_2.jpg" alt="Process photo 2" />
                      <figcaption class="stack-caption">Second step description</figcaption>
                    </figure>
                    <figure class="stack-card stack-card-3">
                      <img src="img/process/bw_3.jpg" alt="Process photo 3" />
                      <figcaption class="stack-caption">Third step description</figcaption>
                    </figure>
                  </div>
                </div>
            </div>
            <div class="about-right">
                <div class="about-carousel">
                    <img src="img/img_01.jpg" alt="About Image 1" class="about-image active">
                    <img src="img/img_02.jpg" alt="About Image 2" class="about-image">
                    <img src="img/img_03.jpg" alt="About Image 3" class="about-image">
                    <img src="img/img_04.jpg" alt="About Image 4" class="about-image">
                    <img src="img/img_05.jpg" alt="About Image 5" class="about-image">
                    <img src="img/img_06.jpg" alt="About Image 6" class="about-image">
                    <img src="img/img_07.jpg" alt="About Image 7" class="about-image">
                </div>
            </div>
        </div>
    </section>

    <section id="creators" class="creators-section">
      <div class="creators-title-carousel">
        <div class="carousel-track">
          <span class="carousel-title">CREATORS</span>
          <span class="carousel-title">CREATORS</span>
          <span class="carousel-title">CREATORS</span>
          <span class="carousel-title">CREATORS</span>
          <!-- Add/remove more carousel-title spans for desired effect -->
        </div>
      </div>
      <div class="creators-grid">
        <div class="creator-card">
          <div class="creator-image" data-speed="0.5">
            <img src="img/creators/kyuin.jpg" alt="Kyuin">
          </div>
          <h3 class="creator-name">NAME</h3>
          <p class="creator-bio">Brief description for name goes here.</p>
        </div>
        <div class="creator-card">
          <div class="creator-image" data-speed="0.5">
            <img src="img/creators/mina.jpg" alt="Mina">
          </div>
          <h3 class="creator-name">NAME</h3>
          <p class="creator-bio">Brief description for name goes here.</p>
        </div>
      </div>
    </section>


    <section id="contact" class="content-section">
        <div class="inner">
            <h2>CONTACT</h2>
            <p>Get in touch with us at [hello@dolbag.com](mailto:hello@dolbag.com) or follow us on social media. We'd love to hear from you and answer any questions about our products.</p>
        </div>
    </section>

    <script type="importmap">
     {
         "imports": {
             "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
             "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
         }
     }
     </script>

     <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
     <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
     <script src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

     <script type="module">
       import * as THREE from 'three';
       import { RoomEnvironment } from 'three/addons/environments/RoomEnvironment.js';

       // Scroll/Animation Libraries
       window.addEventListener('beforeunload', () => {
         window.scrollTo(0, 0);
       });
       if ('scrollRestoration' in history) {
         history.scrollRestoration = 'manual';
       }
       window.scrollTo(0, 0);

       const lenis = new Lenis({
         duration: 1.2,
         easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
         orientation: 'vertical',
         smoothWheel: true,
         smoothTouch: false,
       });

       gsap.registerPlugin(ScrollTrigger);

       lenis.on('scroll', ScrollTrigger.update);
       ScrollTrigger.scrollerProxy(document.body, {
         scrollTop(value) {
           return arguments.length ? lenis.scrollTo(value) : lenis.scroll;
         },
         getBoundingClientRect() {
           return { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight };
         }
       });

       document.body.classList.add('disable-scroll');
       lenis.stop();

       let scrollY = 0;
       lenis.on('scroll', ({ scroll }) => {
         scrollY = scroll;
       });

       function raf(time) {
         lenis.raf(time);
         requestAnimationFrame(raf);
       }
       requestAnimationFrame(raf);

       const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

       // THREE.js scene
       const scene = new THREE.Scene();
       scene.background = new THREE.Color(0xffffff);

       const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
       camera.position.set(0, 0, isMobile ? 18 : 8);

       const renderer = new THREE.WebGLRenderer({
         antialias: true,
         powerPreference: 'high-performance',
         alpha: true,
       });
       renderer.setSize(window.innerWidth, window.innerHeight);
       renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
       renderer.toneMapping = THREE.ACESFilmicToneMapping;
       renderer.toneMappingExposure = 1.2;
       renderer.outputColorSpace = THREE.SRGBColorSpace;
       document.getElementById('hero').appendChild(renderer.domElement);

       // Glossy face material
       const glossyMaterial = new THREE.MeshStandardMaterial({
         color: 0x2a2a2a,
         roughness: 0.4,
         metalness: 0.3,
         envMapIntensity: 0.8,
       });

       // Canvas text for 3D banner
       const canvas3DText = document.createElement('canvas');
       canvas3DText.width = 2048;
       canvas3DText.height = 512;
       const ctx3D = canvas3DText.getContext('2d', { alpha: true, colorSpace: 'srgb' });
       const textTexture = new THREE.CanvasTexture(canvas3DText);
       textTexture.colorSpace = THREE.SRGBColorSpace;

       const textMaterial = new THREE.MeshBasicMaterial({
         map: textTexture,
         transparent: true,
         opacity: 1,
         toneMapped: false,
         depthWrite: false,
       });
       const textScale = isMobile ? 0.35 : 1;
       const textGeometry = new THREE.PlaneGeometry(32 * textScale, 9.5 * textScale);
       const textMesh = new THREE.Mesh(textGeometry, textMaterial);
       textMesh.position.set(0, isMobile ? 6 : 3.9, -5);
       scene.add(textMesh);

       // Shadow below face group
       const canvas = document.createElement('canvas');
       canvas.width = 512;
       canvas.height = 512;
       const ctx = canvas.getContext('2d');
       ctx.save();
       ctx.translate(256, 256);
       ctx.scale(1, 0.4);
       const outerGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 200);
       outerGradient.addColorStop(0, 'rgba(0, 0, 0, 0.4)');
       outerGradient.addColorStop(0.3, 'rgba(0, 0, 0, 0.25)');
       outerGradient.addColorStop(0.6, 'rgba(0, 0, 0, 0.08)');
       outerGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
       ctx.fillStyle = outerGradient;
       ctx.beginPath();
       ctx.arc(0, 0, 200, 0, Math.PI * 2);
       ctx.fill();

       const innerGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 80);
       innerGradient.addColorStop(0, 'rgba(0, 0, 0, 0.5)');
       innerGradient.addColorStop(0.5, 'rgba(0, 0, 0, 0.3)');
       innerGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
       ctx.fillStyle = innerGradient;
       ctx.beginPath();
       ctx.arc(0, 0, 80, 0, Math.PI * 2);
       ctx.fill();
       ctx.restore();

       const shadowTexture = new THREE.CanvasTexture(canvas);
       const shadowMaterial = new THREE.MeshBasicMaterial({
         map: shadowTexture,
         transparent: true,
         opacity: 0,
         depthWrite: false,
       });
       const shadowGeometry = new THREE.PlaneGeometry(6, 2.5);
       const shadowMesh = new THREE.Mesh(shadowGeometry, shadowMaterial);
       shadowMesh.rotation.x = -Math.PI / 2;
       shadowMesh.position.y = -3.5;
       scene.add(shadowMesh);

       // 3D Face group
       const faceGroup = new THREE.Group();
       const width = 4.6, height = 5.5, radius = 2.3, tubeRadius = 0.15;

       const leftEdge = new THREE.CylinderGeometry(tubeRadius, tubeRadius, height - radius, 64);
       const leftEdgeMesh = new THREE.Mesh(leftEdge, glossyMaterial);
       leftEdgeMesh.position.set(-width / 2, radius / 2, 0);
       faceGroup.add(leftEdgeMesh);

       const rightEdge = new THREE.CylinderGeometry(tubeRadius, tubeRadius, height - radius, 64);
       const rightEdgeMesh = new THREE.Mesh(rightEdge, glossyMaterial);
       rightEdgeMesh.position.set(width / 2, radius / 2, 0);
       faceGroup.add(rightEdgeMesh);

       const topEdgeWidth = width + (1.5 * tubeRadius);
       const topEdge = new THREE.CylinderGeometry(tubeRadius, tubeRadius, topEdgeWidth, 64);
       const topEdgeMesh = new THREE.Mesh(topEdge, glossyMaterial);
       topEdgeMesh.rotation.z = Math.PI / 2;
       topEdgeMesh.position.set(0, height / 2, 0);
       faceGroup.add(topEdgeMesh);

       const topLeftCap = new THREE.SphereGeometry(tubeRadius, 32, 32);
       const topLeftCapMesh = new THREE.Mesh(topLeftCap, glossyMaterial);
       topLeftCapMesh.position.set(-width / 2, height / 2, 0);
       faceGroup.add(topLeftCapMesh);

       const topRightCap = new THREE.SphereGeometry(tubeRadius, 32, 32);
       const topRightCapMesh = new THREE.Mesh(topRightCap, glossyMaterial);
       topRightCapMesh.position.set(width / 2, height / 2, 0);
       faceGroup.add(topRightCapMesh);

       const bottomArc = new THREE.TorusGeometry(radius, tubeRadius, 32, 128, Math.PI);
       const bottomArcMesh = new THREE.Mesh(bottomArc, glossyMaterial);
       bottomArcMesh.rotation.z = Math.PI;
       bottomArcMesh.position.set(0, -height / 2 + radius, 0);
       faceGroup.add(bottomArcMesh);

       const leftEyeGeometry = new THREE.SphereGeometry(0.4, 64, 32);
       const leftEye = new THREE.Mesh(leftEyeGeometry, glossyMaterial);
       leftEye.position.set(-1.2, 1.0, 0);
       faceGroup.add(leftEye);

       const rightEyeGeometry = new THREE.SphereGeometry(0.4, 64, 32);
       const rightEye = new THREE.Mesh(rightEyeGeometry, glossyMaterial);
       rightEye.position.set(1.2, 1.0, 0);
       faceGroup.add(rightEye);

       const mouthGeometry = new THREE.BoxGeometry(3.2, 0.3, 0.5);
       const mouth = new THREE.Mesh(mouthGeometry, glossyMaterial);
       mouth.position.set(0, -1.2, 0);
       faceGroup.add(mouth);

       scene.add(faceGroup);
       faceGroup.visible = false;

       // Lights
       const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
       scene.add(ambientLight);
       const mainLight = new THREE.DirectionalLight(0xffffff, 3.5);
       mainLight.position.set(4, 6, 3);
       scene.add(mainLight);
       const rimLight = new THREE.DirectionalLight(0x6699ff, 2.0);
       rimLight.position.set(-5, 2, -3);
       scene.add(rimLight);
       const fillLight = new THREE.DirectionalLight(0xffffff, 2.5);
       fillLight.position.set(0, 0, 8);
       scene.add(fillLight);
       const spotLight = new THREE.PointLight(0xffffff, 2.0, 100);
       spotLight.position.set(0, 3, 7);
       scene.add(spotLight);
       const mouthLight = new THREE.SpotLight(0xffffff, 2.0, 50, Math.PI / 6, 0.5, 1);
       mouthLight.position.set(0, 2, 6);
       scene.add(mouthLight);

       const pmremGenerator = new THREE.PMREMGenerator(renderer);
       scene.environment = pmremGenerator.fromScene(new RoomEnvironment(), 0.04).texture;

       // ------------------- Animation States -------------------
       let isTextAnimating = true;
       let isAnimatingEntrance = false;
       let textScaleProgress = 0;
       const animationStartTime = Date.now();
       let entranceProgress = 0;
       const entranceStartY = 20, entranceEndY = 0;
       const entranceSpinSpeed = Math.PI * 8, entranceDuration = 1500;
       let entranceStartTime = 0;

       let mouseX = 0, mouseY = 0;
       let targetRotationY = 0, targetRotationX = 0;
       document.addEventListener('mousemove', (event) => {
         mouseX = (event.clientX / window.innerWidth) * 2 - 1;
         mouseY = -((event.clientY / window.innerHeight) * 2 - 1);
       });
       document.addEventListener('touchmove', (event) => {
         if (event.touches.length > 0) {
           const touch = event.touches[0];
           mouseX = (touch.clientX / window.innerWidth) * 2 - 1;
           mouseY = -((touch.clientY / window.innerHeight) * 2 - 1);
         }
       }, { passive: true });
       document.addEventListener('touchend', () => { mouseX = 0; mouseY = 0; });
       document.addEventListener('mouseleave', () => { mouseX = 0; mouseY = 0; });

       window.addEventListener('resize', () => {
         camera.aspect = window.innerWidth / window.innerHeight;
         camera.updateProjectionMatrix();
         renderer.setSize(window.innerWidth, window.innerHeight);
       });

       // Draw headline text (entrance state)
       function drawText(scaleProgress) {
         const elasticEaseOut = (t) => {
           if (t === 0 || t === 1) return t;
           t = t * t * (3 - 2 * t);
           const p = 0.3;
           const s = p / 4;
           return Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;
         };
         const easedScale = elasticEaseOut(scaleProgress);
         const w = 2048, h = 512;
         ctx3D.clearRect(0, 0, w, h);
         ctx3D.save();
         ctx3D.translate(w / 2, h / 2);
         ctx3D.scale(easedScale, easedScale);
         ctx3D.fillStyle = '#353535';
         ctx3D.font = '900 300px Roboto, sans-serif';
         ctx3D.textBaseline = 'middle';
         ctx3D.textAlign = 'center';
         ctx3D.fillText('dolbag#001', 0, 0);
         ctx3D.restore();
         textTexture.needsUpdate = true;
       }

       // Main Animation Loop
       function animate() {
         requestAnimationFrame(animate);
         if (isTextAnimating) {
           const elapsed = Date.now() - animationStartTime;
           const textDuration = 800;
           const textDelay = 500;
           if (elapsed < textDelay) {
             textScaleProgress = 0;
             drawText(textScaleProgress);
           } else {
             const textElapsed = elapsed - textDelay;
             textScaleProgress = Math.min(textElapsed / textDuration, 1);
             drawText(textScaleProgress);
             if (textScaleProgress >= 1) {
               isTextAnimating = false;
               isAnimatingEntrance = true;
               entranceStartTime = Date.now();
               faceGroup.visible = true;
             }
           }
         }
         if (isAnimatingEntrance) {
           const elapsed = Date.now() - entranceStartTime;
           entranceProgress = Math.min(elapsed / entranceDuration, 1);
           // Drop-in and spin effect
           const elasticEaseOut = (t) => {
             const n1 = 7.5625, d1 = 2.75;
             if (t < 1 / d1) return n1 * t * t;
             else if (t < 2 / d1) return n1 * (t -= 1.5 / d1) * t + 0.75;
             else if (t < 2.5 / d1) return n1 * (t -= 2.25 / d1) * t + 0.9375;
             else return n1 * (t -= 2.625 / d1) * t + 0.984375;
           };
           const spinEase = (t) => 1 - Math.pow(1 - t, 5);
           const easedDrop = elasticEaseOut(entranceProgress);
           const easedSpin = spinEase(entranceProgress);
           faceGroup.position.y = entranceStartY + (entranceEndY - entranceStartY) * easedDrop;
           faceGroup.rotation.y = (1 - easedSpin) * entranceSpinSpeed;
           faceGroup.rotation.x = Math.sin(entranceProgress * Math.PI) * 0.05;
           const shadowProgress = (entranceStartY - faceGroup.position.y) / entranceStartY;
           const shadowScale = 0.3 + shadowProgress * 0.7;
           shadowMesh.scale.set(shadowScale, 1, shadowScale);
           shadowMaterial.opacity = shadowProgress * 0.8;
           if (entranceProgress >= 1) {
             isAnimatingEntrance = false;
             faceGroup.position.y = entranceEndY;
             faceGroup.rotation.y = 0;
             faceGroup.rotation.x = 0;
             shadowMesh.scale.set(1, 1, 1);
             shadowMaterial.opacity = 0.8;
             document.body.classList.remove('disable-scroll');
             lenis.start();
           }
         }
         if (!isAnimatingEntrance && !isTextAnimating) {
           // Parallax scroll
           const heroHeight = window.innerHeight;
           const parallaxAmount = Math.min(scrollY / heroHeight, 1);
           faceGroup.position.y = parallaxAmount * 30;
           textMesh.position.y = (isMobile ? 6 : 3.9) + (parallaxAmount * 15);
           const shadowFadeAmount = Math.min(parallaxAmount / 0.3, 1);
           const shadowFade = Math.pow(1 - shadowFadeAmount, 3);
           shadowMaterial.opacity = 0.8 * shadowFade;
           targetRotationY = mouseX * 0.5;
           targetRotationX = -mouseY * 0.35;
           faceGroup.rotation.y += (targetRotationY - faceGroup.rotation.y) * 0.08;
           faceGroup.rotation.x += (targetRotationX - faceGroup.rotation.x) * 0.08;
         }
         renderer.render(scene, camera);
       }

       // ---------- About Section Image Carousel ----------
       const carousel = document.querySelector('.about-carousel');
       const images = document.querySelectorAll('.about-image');
       const aboutSection = document.getElementById('about');
       let currentIndex = 0;
       let carouselTimer = null;
       let isInView = false;

       function crossfadeImages() {
         images[currentIndex].classList.remove('active');
         currentIndex = (currentIndex + 1) % images.length;
         images[currentIndex].classList.add('active');
       }
       function startCarousel() {
         if (carouselTimer) {
           clearInterval(carouselTimer);
           carouselTimer = null;
         }
         carouselTimer = setInterval(crossfadeImages, 4000);
       }
       function stopCarousel() {
         if (carouselTimer) {
           clearInterval(carouselTimer);
           carouselTimer = null;
         }
       }
       function checkAboutSection() {
         if (!aboutSection || images.length === 0) return;
         const rect = aboutSection.getBoundingClientRect();
         const windowHeight = window.innerHeight;
         const nowInView = rect.top <= 0 && rect.bottom > windowHeight;
         if (nowInView && !isInView) {
           isInView = true;
           startCarousel();
         } else if (!nowInView && isInView) {
           isInView = false;
           stopCarousel();
         }
       }
       lenis.on('scroll', checkAboutSection);
       if (carousel) {
         carousel.addEventListener('mouseenter', stopCarousel);
         carousel.addEventListener('mouseleave', () => { if (isInView) startCarousel(); });
       }

       // ----- About Stacked Cards Pin/Scroll Animation -----
       function setupStackScrollTrigger() {
         const stack = document.querySelector('.about-left-stack .stack-stage');
         if (!stack) return;
         const card1 = stack.querySelector('.stack-card-1');
         const card2 = stack.querySelector('.stack-card-2');
         const card3 = stack.querySelector('.stack-card-3');
         gsap.set([card1, card2, card3], { y: 0, opacity: 1 });
         const lift1 = -stack.offsetHeight * 1.8;
         const slide2 = -stack.offsetHeight * 1.7;
         const slide3 = -stack.offsetHeight * 1.7;
         gsap.timeline({
           scrollTrigger: {
             trigger: stack,
             start: "bottom 95%",
             end: "+=240%",
             scrub: true,
             pin: true,
             pinSpacing: true,
             anticipatePin: 0,
             scroller: document.body,
             markers: false
           }
         })
         .to(card1, { y: lift1, ease: "none" }, 0)
         .to(card2, { y: slide2, ease: "none" }, 0.33)
         .to(card3, { y: slide3, ease: "none" }, 0.66);
       }

       // ---------- Creators Section Parallax -------------


       function setupAboutParallax() {
  const aboutTitle = document.querySelector('.about-title');
  // Select ALL immediate children of .about-left that have relevant class - can target more specifically if desired
  const aboutTexts = document.querySelectorAll('.about-left .about-text, .about-left .about-text.large');

  // Parallax the title
  if (aboutTitle) {
    gsap.to(aboutTitle, {
      y: -50,    // Adjust speed/amplitude
      ease: "none",
      scrollTrigger: {
        trigger: ".about-container",
        start: "top 85%",   // Adjust as needed
        end: "top 15%",
        scrub: true,
        scroller: document.body
      }
    });
  }

  // Parallax all main text below ("as a group")
  if (aboutTexts.length) {
    gsap.to(aboutTexts, {
      y: -100,               // Less than grid for subtlety (or larger for more motion)
      ease: "none",
      scrollTrigger: {
        trigger: ".about-container",
        start: "top 85%",
        end: "top 15%",
        scrub: true,
        scroller: document.body
      }
    });
  }
}

window.addEventListener('load', () => {
  setupAboutParallax();
  setupCreatorsParallax();
  ScrollTrigger.refresh();
});
window.addEventListener('resize', () => {
  ScrollTrigger.getAll().forEach(t => t.kill());
  setupAboutParallax();
  setupCreatorsParallax();
  ScrollTrigger.refresh();
});




       window.addEventListener('load', () => {
         setupStackScrollTrigger();
         setTimeout(() => {
           setupCreatorsParallax();
           ScrollTrigger.refresh();
         }, 100);
       });
       window.addEventListener('resize', () => {
         ScrollTrigger.getAll().forEach(t => t.kill());
         setupStackScrollTrigger();
         setTimeout(() => {
           setupCreatorsParallax();
           ScrollTrigger.refresh();
         }, 100);
       });

       animate();

       const sectionOrder = ['hero', 'about', 'creators', 'contact'];

       function setActiveMenuIcon(sectionId) {
         document.querySelectorAll('.icon-menu .icon-btn.active').forEach(btn => btn.classList.remove('active'));
         const idx = sectionOrder.indexOf(sectionId);
         if (idx !== -1) {
           document.querySelectorAll('#menu-bottom .icon-btn, #menu-right .icon-btn').forEach((btn, i) => {
             if (i % 5 === idx) btn.classList.add('active');
           });
         }
       }

       function getCurrentSection() {
         let found = sectionOrder[0];
         sectionOrder.forEach(id => {
           const el = document.getElementById(id);
           if (el) {
             const top = el.getBoundingClientRect().top;
             if (top < window.innerHeight * 0.22) {
               found = id;
             }
           }
         });
         return found;
       }

       // On DOM load, highlight current section (on reload)
       window.addEventListener('DOMContentLoaded', () => {
         setActiveMenuIcon(getCurrentSection());
       });

       // As you scroll, highlight current section
       window.addEventListener('scroll', () => {
         setActiveMenuIcon(getCurrentSection());
       });

       // ---- ICON MENU ANIMATION ----
       function waveInMenu(menuId, direction = "bottom") {
         const menu = document.getElementById(menuId);
         menu.classList.remove('hide');
         menu.classList.add('show');
         const btns = menu.querySelectorAll('.icon-btn');
         btns.forEach(btn => {
           btn.style.opacity = 0;
           btn.style.transform = direction === "bottom"
             ? "translateY(60px) scale(0.8)"
             : "translateX(60px) scale(0.8)";
         });
         const animProps = direction === "bottom"
           ? { y: 0 }
           : { x: 0 };
         gsap.to(btns, {
           ...animProps,
           opacity: 1,
           scale: 1,
           duration: 0.44,
           stagger: 0.07,
           ease: "back.out(1.4)",
           onUpdate: () => {
             btns.forEach(btn => {
               btn.style.transform = direction === "bottom"
                 ? "translateY(0) scale(1)"
                 : "translateX(0) scale(1)";
             });
           }
         });
       }
       function waveOutMenu(menuId, direction = "bottom", onDone) {
         const menu = document.getElementById(menuId);
         const btns = menu.querySelectorAll('.icon-btn');
         const animProps = direction === "bottom"
           ? { y: 60 }
           : { x: 60 };
         gsap.to(btns, {
           ...animProps,
           opacity: 0,
           scale: 0.8,
           duration: 0.32,
           stagger: 0.06,
           ease: "back.in(1.2)",
           onComplete: function() {
             menu.classList.remove('show');
             menu.classList.add('hide');
             if (typeof onDone === 'function') onDone();
           }
         });
       }

       // On first load, show bottom menu and highlight hero
       window.addEventListener('load', () => {
         setTimeout(() => {
           waveInMenu('menu-bottom', "bottom");
           setActiveMenuIcon('hero');
         }, 1200);
       });

       // ---- MENU STATE MANAGEMENT WITH ANTI-GLITCH LOCK ----
       let menuState = "bottom";
       let isMenuTransitioning = false;

       lenis.on('scroll', ({ scroll }) => {
         if (isMenuTransitioning) return;
         if (scroll > 10 && menuState === "bottom") {
           isMenuTransitioning = true;
           waveOutMenu('menu-bottom', "bottom", () => {
             waveInMenu('menu-right', "right");
             setActiveMenuIcon(getCurrentSection());
             menuState = "right";
             setTimeout(() => { isMenuTransitioning = false; }, 460);
           });
         } else if (scroll <= 10 && menuState === "right") {
           isMenuTransitioning = true;
           waveOutMenu('menu-right', "right", () => {
             waveInMenu('menu-bottom', "bottom");
             setActiveMenuIcon(getCurrentSection());
             menuState = "bottom";
             setTimeout(() => { isMenuTransitioning = false; }, 460);
           });
         }
       });

       // ---- MENU BUTTON BEHAVIOR ----
       [...document.querySelectorAll('#menu-right .icon-btn'), ...document.querySelectorAll('#menu-bottom .icon-btn')].forEach((btn, idx) => {
         btn.addEventListener('click', (e) => {
           e.preventDefault();
           // Home button
           if (btn.querySelector('.fa-home')) {
             lenis.scrollTo(0, {
               offset: 0,
               duration: 1.4,
               easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t))
             });
             setActiveMenuIcon('hero');
             if (menuState === "right" && !isMenuTransitioning) {
               isMenuTransitioning = true;
               waveOutMenu('menu-right', "right", () => {
                 waveInMenu('menu-bottom', "bottom");
                 menuState = "bottom";
                 setTimeout(() => { isMenuTransitioning = false; }, 460);
               });
             }
             return;
           }
           // Shop button
           if (btn.querySelector('.fa-shopping-bag')) {
             window.open('/shop', '_blank');
             return;
           }
           // Other sections
           const sectionMap = ['hero', 'about', 'creators', 'contact'];
           const sectionIdx = idx % 5;
           if (sectionIdx > 0 && sectionIdx < 5 && sectionIdx - 1 < sectionMap.length) {
             const section = document.getElementById(sectionMap[sectionIdx]);
             if (section) {
               lenis.scrollTo(section, {
                 offset: 0,
                 duration: 1.4,
                 easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t))
               });
               setActiveMenuIcon(sectionMap[sectionIdx]);
             }
           }
         });
       });

       function setupCreatorsTitleCarousel() {
         const track = document.querySelector('.carousel-track');
         if (!track) return;

         // Get the width of one loop (all children titles + gaps)
         const trackWidth = track.scrollWidth; // total width of all titles

         // Animate horizontal movement on scroll
         gsap.to(track, {
           x: () => `-${trackWidth / 2}px`, // Move half the loop width, tweak as desired for effect
           ease: "none",
           scrollTrigger: {
             trigger: ".creators-section",
             start: "top bottom",
             end: "bottom top",
             scrub: true,
             scroller: document.body,
           },
           modifiers: {
             x: gsap.utils.unitize(x => {
               // Optional: if you want seamless looping appearance
               // Uncomment below to enable "wrap-around" infinite loop illusion
               // const limit = trackWidth;
               // return `${(parseFloat(x) % limit)}px`;
               return x;
             }),
           }
         });
       }

       window.addEventListener('load', () => {
         setupCreatorsTitleCarousel();
         // ... other setup/parallax calls ...
         ScrollTrigger.refresh();
       });
       window.addEventListener('resize', () => {
         ScrollTrigger.getAll().forEach(t => t.kill());
         setupCreatorsTitleCarousel();
         // ... other setup/parallax calls ...
         ScrollTrigger.refresh();
       });










     </script>
</body>
</html>
